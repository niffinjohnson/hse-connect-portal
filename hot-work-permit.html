<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Hot Work Permit - HSE Connect</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #e5e5e5;
}

.page {
    width: 1000px;
    margin: 20px auto;
    background: white;
    padding: 10px;
    border: 2px solid #000;
    page-break-after: always;
}

h1, h2 {
    text-align: center;
    margin: 5px 0;
}

.banner {
    background: #ddd;
    border: 1px solid #000;
    padding: 6px;
    text-align: center;
    font-weight: bold;
    margin-bottom: 10px;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 8px;
}

td, th {
    border: 1px solid #000;
    padding: 4px;
    font-size: 12px;
    vertical-align: top;
}

.section {
    background: #f2f2f2;
    font-weight: bold;
    text-align: center;
}

input, textarea {
    width: 100%;
    border: none;
    font-size: 12px;
}

textarea {
    resize: vertical;
}

button {
    width: 100%;
    padding: 10px;
    background: #d32f2f;
    color: white;
    border: none;
    font-weight: bold;
    cursor: pointer;
}

@media print {
    button { display: none; }
}
</style>
</head>

<body>

<form id="hotWorkForm">

<!-- PAGE 1 -->
<div class="page">

<h2>AMPHENOL FCI</h2>
<h1>HOT WORK PERMIT</h1>

<div class="banner">
STOP â€“ Avoid hot work when possible. Consider using an alternative cold work method.
</div>

<table>
<tr>
<td width="50%">
<b>Instruction for Permit Authorizer</b><br>
1. Specify precautions.<br>
2. Keep Part I during work.<br>
3. Issue Part II to worker.<br>
4. Monitor post-work fire watch.<br>
5. Sign final check.
</td>
<td width="50%">
<div class="section">Required Precautions</div>
<label><input type="checkbox" value="Fire pump operational"> Fire pump operational</label>
<label><input type="checkbox" value="Control valves open"> Control valves open</label>
<label><input type="checkbox" value="Extinguishers available"> Extinguishers available</label>
<label><input type="checkbox" value="Equipment in good condition"> Equipment in good condition</label>
<label><input type="checkbox" value="Shield combustibles within 35ft"> Shield combustibles within 35 ft</label>
<label><input type="checkbox" value="Remove ignitable liquids"> Remove ignitable liquids</label>
<label><input type="checkbox" value="Isolate equipment"> Isolate equipment</label>
<label><input type="checkbox" value="Continuous fire watch"> Continuous fire watch</label>
</td>
</tr>
</table>

<table>
<tr>
<td width="25%">Hot Work By</td>
<td width="25%"><input id="workBy"></td>
<td width="25%">Date</td>
<td width="25%"><input type="date" id="date"></td>
</tr>

<tr>
<td>Job Number</td>
<td><input id="jobNumber"></td>
<td>Location</td>
<td><input id="location"></td>
</tr>

<tr>
<td colspan="4">Work to be Performed
<textarea id="workDescription"></textarea>
</td>
</tr>

<tr>
<td colspan="2">Name Performing Hot Work
<input id="performer">
</td>
<td colspan="2">Name Performing Fire Watch
<input id="fireWatchName">
</td>
</tr>

<tr>
<td colspan="2">Permit Authorizer (Name & Sign)
<input id="authorizer">
</td>
<td>Permit Expiry Date</td>
<td><input type="date" id="expiryDate"></td>
</tr>

<tr>
<td colspan="4">Additional Required Precautions
<textarea id="additionalPrecautions"></textarea>
</td>
</tr>
</table>

</div>

<!-- PAGE 2 -->
<div class="page">

<h1>WARNING</h1>
<h2>HOT WORK IN PROGRESS! WATCH FOR FIRE</h2>

<table>
<tr>
<td width="50%">
<b>Instructions</b><br>
Record start and completion time.<br>
Monitor area during and after work.<br>
Sign and return permit.
</td>
<td width="50%">
<div class="section">Post-Work Fire Watch</div>
<label><input type="checkbox" value="1 hour watch"> 1 hour fire watch</label>
<label><input type="checkbox" value="3 hour monitoring"> 3 hour monitoring</label>
</td>
</tr>
</table>

</div>

<!-- PAGE 3 -->
<div class="page">

<h1>WARNING</h1>
<h2>HOT WORK IN PROGRESS! WATCH FOR FIRE</h2>

<table>
<tr>
<th>Emergency Contact</th>
<th>Number</th>
</tr>
<tr>
<td><input></td>
<td><input></td>
</tr>
<tr>
<td><input></td>
<td><input></td>
</tr>
</table>

<table>
<tr>
<th colspan="6">Construction & Occupancy Fire Watch Guidelines</th>
</tr>
<tr>
<th>Occupancy</th>
<th>Non-Combustible</th>
<th>Watch</th>
<th>Combustible</th>
<th>Watch</th>
<th>Monitor</th>
</tr>
<tr>
<td>Office/Manufacturing</td>
<td>1 hr</td>
<td>1 hr</td>
<td>3 hr</td>
<td>1 hr</td>
<td>5 hr</td>
</tr>
<tr>
<td>Warehousing</td>
<td>1 hr</td>
<td>2 hr</td>
<td>3 hr</td>
<td>1 hr</td>
<td>5 hr</td>
</tr>
</table>

<button type="submit">SUBMIT PERMIT</button>

</div>

</form>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDsFX7tQezhtJi6GkVBpZXn7YyJgZfyi7o",
  authDomain: "hse-connect-5b0a3.firebaseapp.com",
  projectId: "hse-connect-5b0a3",
  storageBucket: "hse-connect-5b0a3.firebasestorage.app",
  messagingSenderId: "1017230242361",
  appId: "1:1017230242361:web:66d427e171595aae5c53e8",
  measurementId: "G-2GGKDEJTKW"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

document.getElementById("hotWorkForm").addEventListener("submit", async (e) => {

e.preventDefault();

const user = auth.currentUser;
if (!user) {
alert("Login required.");
return;
}

const permitData = {
permitType: "Hot Work",
workBy: document.getElementById("workBy").value,
date: document.getElementById("date").value,
jobNumber: document.getElementById("jobNumber").value,
location: document.getElementById("location").value,
workDescription: document.getElementById("workDescription").value,
performer: document.getElementById("performer").value,
fireWatchName: document.getElementById("fireWatchName").value,
authorizer: document.getElementById("authorizer").value,
expiryDate: document.getElementById("expiryDate").value,
additionalPrecautions: document.getElementById("additionalPrecautions").value,
createdBy: user.email,
status: "Pending Approval",
createdAt: serverTimestamp()
};

await addDoc(collection(db, "permits"), permitData);

alert("Permit submitted successfully.");
e.target.reset();

});

</script>

</body>
</html>
